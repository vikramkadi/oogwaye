<!--
data_drop.html:
Implements drop boxes for data fields. Data dropped in these boxes are readied
for display.
/-->
<link rel="stylesheet" href="{{url_for('static', filename='css/common/token-input.css')}}" type="text/css" />

<style>
  .form-horizontal .control-label {
    text-align: right;
  }
  .form-horizontal .form-group {
    margin-bottom: 0px;
  }
</style>

<script>

  function newDataToken( domObject ) {
    var token = $( "<li></li>" ).addClass( "token-input-token" )
      .prop( "id", domObject.data( "data-name" ) )
      .prop( "data-type", domObject.data( "data-type" ) )
      .prop( "column-id", domObject.data( "column-id" ) );
    $( "<p></p>" ).html( domObject.text() ).appendTo( token );
    $( "<span></span>" ).addClass( "icon-remove-sign" ).click( function() {
      this.parentNode.remove();
      updateView();
    }).appendTo( token );
    // Set object properties
    return token;
  }

  function newDataDrop() {
    var dataDrop = $( "#template-data-drop" ).contents().clone();
    $( ".droppable-input", dataDrop ).droppable({
      activeClass: "ui-state-default",
      drop: function( event, ui ) {
        $("#placeholder", this).before( newDataToken( ui.draggable ));
        updateView();
      }
    });
    return dataDrop;
  }

  // Return array of tokens stored for given view
  function getDataDropDataTokens( domContext ) {
    var tokens = $( "ul .token-input-token", domContext ).map( function() {
      return this;
    }).get();
    return tokens;
  }

</script>

<!-- templated html block -->
<div id="template-data-drop" style="display: none">
  <div id="data-drop" class="container">
    <div class="input-group input-group-md" style="margin-bottom: 15px">
    <span class="input-group-addon"><em>X</em></span>
    <ul class="form-control input-md droppable-input token-input-list">
      <li id="placeholder">
        <input type="text" autocomplete="off" style="outline: none" placeholder="" disabled="true">
      </li>
    </ul>
    </div>
    <div class="input-group input-group-md" style="margin-bottom: 15px">
    <span class="input-group-addon"><em>Y</em></span>
    <ul class="form-control input-md droppable-input token-input-list">
      <li id="placeholder">
        <input type="text" autocomplete="off" style="outline: none" placeholder="" disabled="true">
      </li>
    </ul>
    </div>
  </div><!-- .container -->
  <!--
  <form class="form-horizontal" role="form">
    <div class="form-group">
      <label class="col-md-2 control-label">X </label>
      <div class="col-md-10">
        <ul class="droppable-input token-input-list" style="width: auto; height: auto;">
          <li id="placeholder">
            <input type="text" autocomplete="off" style="outline: none" placeholder="" disabled="true">
          </li>
        </ul>
      </div>
    </div>
    <div class="form-group">
      <label class="col-md-2 control-label">Y </label>
      <div class="col-md-10">
        <ul class="droppable-input token-input-list" style="width: auto; height: auto;">
          <li id="placeholder">
            <input type="text" autocomplete="off" style="outline: none" placeholder="" disabled="true">
          </li>
        </ul>
      </div>
    </div>
  </form>
  -->
</div>